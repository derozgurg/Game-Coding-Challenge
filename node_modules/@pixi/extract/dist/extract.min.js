/*!
 * @pixi/extract - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
this.PIXI=this.PIXI||{};var _pixi_extract=function(e,t,r,n){"use strict";var a=new PIXI.Rectangle,i=function(e){this.renderer=e,e.extract=this};return i.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},i.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},i.prototype.canvas=function(e){var n,s,o,h=this.renderer,d=!1,u=!1;e&&(e instanceof t.RenderTexture?o=e:(o=this.renderer.generateTexture(e),u=!0)),o?(n=o.baseTexture.resolution,s=o.frame,d=!1,h.renderTexture.bind(o)):(n=this.renderer.resolution,d=!0,(s=a).width=this.renderer.width,s.height=this.renderer.height,h.renderTexture.bind(null));var c=Math.floor(s.width*n+1e-4),x=Math.floor(s.height*n+1e-4),l=new r.CanvasRenderTarget(c,x,1),g=new Uint8Array(4*c*x),v=h.gl;v.readPixels(s.x*n,s.y*n,c,x,v.RGBA,v.UNSIGNED_BYTE,g);var I=l.context.getImageData(0,0,c,x);if(i.arrayPostDivide(g,I.data),l.context.putImageData(I,0,0),d){var f=new r.CanvasRenderTarget(l.width,l.height,1);f.context.scale(1,-1),f.context.drawImage(l.canvas,0,-x),l.destroy(),l=f}return u&&o.destroy(!0),l.canvas},i.prototype.pixels=function(e){var r,n,s,o=this.renderer,h=!1;e&&(e instanceof t.RenderTexture?s=e:(s=this.renderer.generateTexture(e),h=!0)),s?(r=s.baseTexture.resolution,n=s.frame,o.renderTexture.bind(s)):(r=o.resolution,(n=a).width=o.width,n.height=o.height,o.renderTexture.bind(null));var d=n.width*r,u=n.height*r,c=new Uint8Array(4*d*u),x=o.gl;return x.readPixels(n.x*r,n.y*r,d,u,x.RGBA,x.UNSIGNED_BYTE,c),h&&s.destroy(!0),i.arrayPostDivide(c,c),c},i.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},i.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var n=t[r+3]=e[r+3];0!==n?(t[r]=Math.round(Math.min(255*e[r]/n,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},e.Extract=i,e}({},PIXI,PIXI.utils);Object.assign(this.PIXI,_pixi_extract);
//# sourceMappingURL=extract.min.js.map
